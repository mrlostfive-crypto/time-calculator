<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚è∞ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≤—Ä–µ–º–µ–Ω–∏</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        h2 {
            color: #555;
            margin: 25px 0 15px 0;
            border-bottom: 2px solid #667eea;
            padding-bottom: 8px;
        }

        .section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            border-left: 4px solid #667eea;
        }

        .input-group {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .time-input {
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
            flex: 1;
            min-width: 120px;
        }

        .time-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            padding: 12px 25px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
            flex-shrink: 0;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6c757d, #495057);
        }

        .btn-secondary:hover {
            box-shadow: 0 5px 15px rgba(108, 117, 125, 0.4);
        }

        .result {
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 10px;
            border: 2px solid #e9ecef;
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }

        .history-item {
            padding: 8px 12px;
            margin: 5px 0;
            background: white;
            border-radius: 6px;
            border-left: 3px solid #667eea;
        }

        .operations {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        @media (max-width: 768px) {
            .input-group {
                flex-direction: column;
                align-items: stretch;
            }
            
            .time-input, .btn {
                width: 100%;
            }
            
            .operations {
                grid-template-columns: 1fr;
            }
        }

        .total-display {
            font-size: 1.2em;
            color: #28a745;
            font-weight: bold;
            text-align: center;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚è∞ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≤—Ä–µ–º–µ–Ω–∏</h1>
        
        <!-- –°–µ–∫—Ü–∏—è 1: –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –¥–≤—É–º—è –º–æ–º–µ–Ω—Ç–∞–º–∏ –≤—Ä–µ–º–µ–Ω–∏ -->
        <div class="section">
            <h2>üìä –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –≤—Ä–µ–º–µ–Ω–µ–º</h2>
<p><em>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ–º–µ–∂—É—Ç–∫–∞ –º–µ–∂–¥—É –¥–≤—É–º—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –º–æ–º–µ–Ω—Ç–∞–º–∏</em></p>
            <div class="input-group">
                <input type="time" id="time1" class="time-input" value="09:00">
                <input type="time" id="time2" class="time-input" value="17:30">
                <button onclick="calculateDifference()" class="btn">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Ä–∞–∑–Ω–∏—Ü—É</button>
            </div>
            <div class="operations">
                <button onclick="swapTimes()" class="btn btn-secondary">‚ÜîÔ∏è –ü–æ–º–µ–Ω—è—Ç—å –º–µ—Å—Ç–∞–º–∏</button>
                <button onclick="clearTimes()" class="btn btn-secondary">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
            </div>
        </div>

        <!-- –°–µ–∫—Ü–∏—è 2: –°—É–º–º–∞—Ç–æ—Ä –ø—Ä–æ–º–µ–∂—É—Ç–∫–æ–≤ –≤—Ä–µ–º–µ–Ω–∏ -->
        <div class="section">
            <h2>‚ûï –°—É–º–º–∞—Ç–æ—Ä –≤—Ä–µ–º–µ–Ω–∏</h2>
            <p><em>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–ª–æ–∂–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ–º–µ–∂—É—Ç–∫–æ–≤ –≤—Ä–µ–º–µ–Ω–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2—á30–º + 1—á45–º)</em></p>
            <div class="input-group">
                <input type="number" id="hours" placeholder="–ß–∞—Å—ã" class="time-input" min="0">
                <input type="number" id="minutes" placeholder="–ú–∏–Ω—É—Ç—ã" class="time-input" min="0" max="59">
                <button onclick="addTime()" class="btn">–î–æ–±–∞–≤–∏—Ç—å –≤—Ä–µ–º—è</button>
                <button onclick="subtractTime()" class="btn btn-secondary">–í—ã—á–µ—Å—Ç—å –≤—Ä–µ–º—è</button>
            </div>
            <div class="input-group">
                <button onclick="resetTime()" class="btn btn-secondary">üîÑ –°–±—Ä–æ—Å–∏—Ç—å —Å—É–º–º—É</button>
                <button onclick="saveSession()" class="btn btn-secondary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–µ—Å—Å–∏—é</button>
            </div>
            
            <div id="timeHistory"></div>
            <div id="totalTime" class="total-display"></div>
        </div>

        <!-- –°–µ–∫—Ü–∏—è 3: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
        <div class="section">
            <h2>üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
            <div id="result" class="result">–ó–¥–µ—Å—å –±—É–¥—É—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–æ–≤...</div>
        </div>
    </div>

    <script>
        // ===== –ü–ï–†–ï–ú–ï–ù–ù–´–ï –î–õ–Ø –°–£–ú–ú–ê–¢–û–†–ê =====
        let timeEntries = [];
        let totalMinutes = 0;

        // ===== –§–£–ù–ö–¶–ò–ò –î–õ–Ø –†–ê–ó–ù–ò–¶–´ –í–†–ï–ú–ï–ù–ò =====
        
        function calculateDifference() {
            const time1 = document.getElementById('time1').value;
            const time2 = document.getElementById('time2').value;
            
            if (!time1 || !time2) {
                showResult('‚ö†Ô∏è –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±–∞ –ø–æ–ª—è –≤—Ä–µ–º–µ–Ω–∏');
                return;
            }
            
            const [h1, m1] = time1.split(':').map(Number);
            const [h2, m2] = time2.split(':').map(Number);
            
            let totalMinutes1 = h1 * 60 + m1;
            let totalMinutes2 = h2 * 60 + m2;
            
            // –£—á–∏—Ç—ã–≤–∞–µ–º –ø–µ—Ä–µ—Ö–æ–¥ —á–µ—Ä–µ–∑ –ø–æ–ª–Ω–æ—á—å
            if (totalMinutes2 < totalMinutes1) {
                totalMinutes2 += 24 * 60; // –î–æ–±–∞–≤–ª—è–µ–º —Å—É—Ç–∫–∏
            }
            
            let diff = totalMinutes2 - totalMinutes1;
            let hours = Math.floor(diff / 60);
            let minutes = diff % 60;
            
            const resultText = `‚è±Ô∏è –†–∞–∑–Ω–∏—Ü–∞: ${hours} —á–∞—Å–æ–≤ ${minutes} –º–∏–Ω—É—Ç\n` +
                             `(${time1} ‚Üí ${time2})`;
            
            showResult(resultText);
        }

        function swapTimes() {
            const time1 = document.getElementById('time1');
            const time2 = document.getElementById('time2');
            const temp = time1.value;
            time1.value = time2.value;
            time2.value = temp;
        }

        function clearTimes() {
            document.getElementById('time1').value = '';
            document.getElementById('time2').value = '';
            showResult('–ü–æ–ª—è –æ—á–∏—â–µ–Ω—ã');
        }

        // ===== –§–£–ù–ö–¶–ò–ò –î–õ–Ø –°–£–ú–ú–ê–¢–û–†–ê –í–†–ï–ú–ï–ù–ò =====

        function addTime() {
            const hours = parseInt(document.getElementById('hours').value) || 0;
            const minutes = parseInt(document.getElementById('minutes').value) || 0;
            
            if (hours === 0 && minutes === 0) {
                showResult('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ —Ö–æ—Ç—è –±—ã —á–∞—Å—ã –∏–ª–∏ –º–∏–Ω—É—Ç—ã');
return;
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
            timeEntries.push({ hours, minutes });
            totalMinutes += hours * 60 + minutes;
            
            updateTimeDisplay();
            clearInputFields();
            
            showResult(`‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: ${hours}—á ${minutes}–º`);
        }

        function subtractTime() {
            const hours = parseInt(document.getElementById('hours').value) || 0;
            const minutes = parseInt(document.getElementById('minutes').value) || 0;
            
            if (hours === 0 && minutes === 0) {
                showResult('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ —Ö–æ—Ç—è –±—ã —á–∞—Å—ã –∏–ª–∏ –º–∏–Ω—É—Ç—ã');
                return;
            }
            
            // –í—ã—á–∏—Ç–∞–µ–º –∏–∑ –æ–±—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
            const subtractMinutes = hours * 60 + minutes;
            totalMinutes = Math.max(0, totalMinutes - subtractMinutes);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏—Å—Ç–æ—Ä–∏—é (—É–¥–∞–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é –∑–∞–ø–∏—Å—å, –µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å)
            if (timeEntries.length > 0) {
                timeEntries.pop();
            }
            
            updateTimeDisplay();
            clearInputFields();
            
            showResult(`‚ùå –í—ã—á—Ç–µ–Ω–æ: ${hours}—á ${minutes}–º`);
        }

        function resetTime() {
            timeEntries = [];
            totalMinutes = 0;
            updateTimeDisplay();
            showResult('üîÑ –°—É–º–º–∞—Ç–æ—Ä —Å–±—Ä–æ—à–µ–Ω');
        }

        function updateTimeDisplay() {
            const historyElement = document.getElementById('timeHistory');
            const totalElement = document.getElementById('totalTime');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏—Å—Ç–æ—Ä–∏—é
            if (timeEntries.length === 0) {
                historyElement.innerHTML = '<div style="color: #6c757d; text-align: center;">–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞</div>';
            } else {
                const historyHTML = timeEntries.map((entry, index) => 
                    `<div class="history-item">${index + 1}. ${entry.hours}—á ${entry.minutes}–º</div>`
                ).join('');
                historyElement.innerHTML = `<strong>üìã –ò—Å—Ç–æ—Ä–∏—è:</strong><br>${historyHTML}`;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â–µ–µ –≤—Ä–µ–º—è
            const totalHours = Math.floor(totalMinutes / 60);
            const totalMins = totalMinutes % 60;
            
            if (totalMinutes === 0) {
                totalElement.textContent = '–û–±—â–µ–µ –≤—Ä–µ–º—è: 0—á 0–º';
            } else {
                totalElement.textContent = `–û–±—â–µ–µ –≤—Ä–µ–º—è: ${totalHours}—á ${totalMins}–º`;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≤ –¥–Ω–∏ –µ—Å–ª–∏ –±–æ–ª—å—à–µ 24 —á–∞—Å–æ–≤
                if (totalHours >= 24) {
                    const days = Math.floor(totalHours / 24);
                    const remainingHours = totalHours % 24;
                    totalElement.textContent += ` (${days}–¥ ${remainingHours}—á ${totalMins}–º)`;
                }
            }
        }

        function saveSession() {
            localStorage.setItem('timeCalculator_totalMinutes', totalMinutes);
            localStorage.setItem('timeCalculator_entries', JSON.stringify(timeEntries));
            showResult('üíæ –°–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞! –î–∞–Ω–Ω—ã–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.');
        }

        function loadSession() {
            const savedTotal = localStorage.getItem('timeCalculator_totalMinutes');
            const savedEntries = localStorage.getItem('timeCalculator_entries');
            
            if (savedTotal && savedEntries) {
                totalMinutes = parseInt(savedTotal);
                timeEntries = JSON.parse(savedEntries);
                updateTimeDisplay();
                console.log('–°–µ—Å—Å–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞');
            }
        }

        // ===== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò =====

        function clearInputFields() {
            document.getElementById('hours').value = '';
            document.getElementById('minutes').value = '';
            document.getElementById('hours').focus();
        }

        function showResult(message) {
            document.getElementById('result').textContent = message;
        }
// ===== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø =====
        
        document.addEventListener('DOMContentLoaded', function() {
            loadSession(); // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Å–µ—Å—Å–∏—é
            updateTimeDisplay(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—É–º–º—ã
            
            // –§–æ–∫—É—Å –Ω–∞ –ø–µ—Ä–≤–æ–º –ø–æ–ª–µ
            document.getElementById('hours').focus();
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ Enter –≤ –ø–æ–ª—è—Ö –≤–≤–æ–¥–∞
            document.getElementById('minutes').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    addTime();
                }
            });
        });
    </script>
</body>
</html>
